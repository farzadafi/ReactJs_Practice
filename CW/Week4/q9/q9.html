<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>

        @font-face {
            src: url("Vazir.ttf");
            font-family: 'farzad';

        }

        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        html, body {
            background-color: gray;
            padding: 30px;
        }

        .main-container {
            display: grid;
            grid-template-columns: 1fr 4fr;
            font-family: 'farzad', serif;
            gap: 10px;
        }

        .form {
            background-color: orange;
            height: 400px;
            width: 100%;
            display: grid;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            border-radius: 25px;
        }

        .form p {
            margin: auto;
        }

        .form input {
            height: 40px;
            padding: 10px;
            border: none;
            border-radius: 25px;
        }

        .form button {
            background-color: deeppink;
            border: none;
            border-radius: 25px;
            height: 35px;
            width: 120px;
            margin: auto;
            color: white;
            font-family: 'farzad', serif;
            font-size: 15px;
            font-weight: bold;
        }

        .form button:hover {
            background-color: purple;
            cursor: pointer;
        }

        .table {
            width: 100%;
            height: 100%;
            background-color: deeppink;
            border-radius: 25px;
        }

        table {
            padding: 20px;
            width: 100%;
            height: 100%;
        }

        table th {
            width: 450px;
            height: 50px;
        }

        tr {
        }

        td {
            text-align: center;
            height: 10px;
        }

        .remove-btn {
            background-color: orangered;
            height: 40px;
            width: 100px;
            border: none;
            border-radius: 30px;
            color: white;
        }

        .edit-btn {
            background-color: purple;
            height: 40px;
            width: 100px;
            border: none;
            border-radius: 30px;
            color: white;
        }

        .remove-btn:hover {
            cursor: pointer;
            background-color: orange;
        }

        .edit-btn:hover {
            cursor: pointer;
            background-color: rebeccapurple;
        }


    </style>

</head>
<body>
<div class="main-container">
    <div class="form">
        <p>فرم ورود اطلاعات</p>
        <label for="rowId" aria-disabled="true">
            <input id="rowId" value="1" type="number" hidden="hidden">
        </label>
        <label for="tempRowNumber" aria-disabled="true">
            <input id="tempRowNumber" type="number" hidden="hidden">
        </label>
        <label for="firstname">
            <input id="firstname" type="text" placeholder="نام">
        </label>
        <label for="lastname">
            <input id="lastname" type="text" placeholder="نام خانوادگی">
        </label>
        <label for="email">
            <input id="email" type="email" placeholder="ایمیل">
        </label>
        <label for="phone">
            <input id="phone" type="tel" placeholder="شماره تلفن">
        </label>
        <button onclick="getInformation()">ثبت اطلاعات</button>
    </div>
    <div class="table">
        <table id="table">
            <tr>
                <th>شناسه</th>
                <th>نام</th>
                <th>نام خانوادگی</th>
                <th>ایمیل</th>
                <th>شماره تلفن</th>
                <th>ویرایش</th>
                <th>حذف</th>
            </tr>
            <tr id="tr">
            </tr>
        </table>
    </div>
</div>


<script>

    window.onload = () => {
        document.getElementById("rowId").value = Number(1);
        document.getElementById("tempRowNumber").value = Number(-1);
        let value = ['', '', '', '',];
        setFormValue(value);
    }

    const getInformation = () => {
        let tempRowNumber = Number(document.getElementById('tempRowNumber').value);
        let id;
        let isTemp = 1;
        if (tempRowNumber === -1)
            id = document.getElementById('rowId').value;
        else {
            id = document.getElementById('tempRowNumber').value;
            isTemp = 0;
        }
        let firstname = document.getElementById('firstname').value;
        let lastname = document.getElementById('lastname').value;
        let email = document.getElementById('email').value;
        let phone = document.getElementById('phone').value;

        let information = [id, firstname, lastname, email, phone];
        setInformation(information, isTemp);
    }

    const setInformation = (information, isTemp) => {
        if (isTemp === 0)
            editRow(information);
        else {
            let tableRow = document.getElementById('table');
            let row = document.createElement("tr");

            let idTd = createIdTd(information[0])
            let firstnameTd = createFirstnameTd(information[1])
            let lastnameTd = createLastnameTd(information[2])
            let emailTd = createEmailTd(information[3])
            let phoneTd = createPhoneTd(information[4])
            let removeTd = createRemoveButton(information[0]);
            let editTd = createEditButton(information[0])

            row.append(idTd, firstnameTd, lastnameTd, emailTd, phoneTd, editTd, removeTd);
            row.setAttribute('id', `tr${information[0]}`);
            tableRow.appendChild(row);
            document.getElementById('tempRowNumber').value = -1;

            if (Number(isTemp) !== 0)
                increaseIdValue(information[0])

        }
        let value = ['', '', '', '',];
        setFormValue(value);
    }

    const createIdTd = (idValue) => {
        let id = document.createElement("td");
        id.innerHTML = idValue;
        return id;
    }

    const createFirstnameTd = (firstnameValue) => {
        let firstname = document.createElement("td");
        firstname.innerHTML = firstnameValue;
        return firstname;
    }

    const createLastnameTd = (lastnameValue) => {
        let lastname = document.createElement("td");
        lastname.innerHTML = lastnameValue;
        return lastname;
    }

    const createEmailTd = (emailValue) => {
        let email = document.createElement("td");
        email.innerHTML = emailValue;
        return email;
    }

    const createPhoneTd = (phoneValue) => {
        let phone = document.createElement("td");
        phone.innerHTML = phoneValue;
        return phone;
    }

    const createRemoveButton = (numberRow) => {
        let removeButton = document.createElement("button");
        let removeTd = document.createElement("td");
        removeButton.innerHTML = 'حذف';
        removeButton.setAttribute('onclick', `deleteSpecificRows(${numberRow})`);
        removeButton.className = "remove-btn";
        removeTd.append(removeButton);
        return removeTd;
    }

    const createEditButton = (numberRow) => {
        let editButton = document.createElement("button");
        let editTd = document.createElement("td");
        editButton.innerHTML = 'ویرایش';
        editButton.className = "edit-btn";
        editTd.append(editButton);
        editButton.setAttribute('onclick', `editSpecificRows(${numberRow})`);
        return editTd;
    }


    const setFormValue = (information) => {
        document.getElementById('firstname').value = information[0];
        document.getElementById('lastname').value = information[1];
        document.getElementById('email').value = information[2];
        document.getElementById('phone').value = information[3];
    }

    const increaseIdValue = (numberId) => {
        document.getElementById("rowId").value = Number(++numberId);
    }

    const deleteSpecificRows = (rowId) => {
        let row = document.getElementById(`tr${rowId}`);
        row.remove();
    }

    const editSpecificRows = (rowId) => {
        let row = document.getElementById(`tr${rowId}`);
        let td = row.getElementsByTagName('td');

        let rowNumber = td[0].innerHTML;
        let firstname = td[1].innerHTML;
        let lastname = td[2].innerHTML;
        let email = td[3].innerHTML;
        let phone = td[4].innerHTML;

        let value = [firstname, lastname, email, phone];
        setFormValue(value);
        document.getElementById('tempRowNumber').value = rowNumber;
    }

    const editRow = (information) => {
        let row = document.getElementById(`tr${information[0]}`);
        let td = row.getElementsByTagName('td');

        td[1].innerHTML = information[1];
        td[2].innerHTML = information[2];
        td[3].innerHTML = information[3];
        td[4].innerHTML = information[4];
        document.getElementById('tempRowNumber').value = -1;
    }

</script>
</body>
</html>