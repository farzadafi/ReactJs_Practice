<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body class="bg-secondary">
<main class="container d-flex flex-wrap gap-3">
    <!--    card-->
    <div class="card col-12">
        <!--        header-->
        <div class="card-header d-flex align-items-center gap-2 justify-content-between">
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder"
                     viewBox="0 0 16 16">
                    <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"/>
                </svg>
                <span class="">Jobs</span>
                <div id="jobCounter" class="btn btn-primary">0</div>
            </div>
            <div>
                <button id="addJobBtn" class="btn btn-outline-primary"><span class="fw-bold">+ </span>Add Job</button>
            </div>
        </div>
        <!--        card body-->
        <div id="cardBody" class="card-body d-flex gap-3 flex-wrap">
        </div>
    </div>
    <!--    card-->
    <div class="card col-12">
        <!--        header-->
        <div class="card-header d-flex align-items-center gap-2 justify-content-between">
            <div>
                <img src="./image/archive.svg" alt="archive">
                <span class="">Finished Jobs</span>
            </div>
            <div>
                <button id="removeAllJobsBtn" class="btn btn-outline-primary">
                    <img src="./image/trash3.svg" alt="">
                    Clean-up
                </button>
            </div>
        </div>
        <!--        card body-->
        <div id="finishCardBody" class="card-body d-flex gap-3 flex-wrap">
        </div>
    </div>
</main>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

<script>

    const addJobBtn = document.getElementById('addJobBtn');
    let array = [];
    let cardBody = document.getElementById('cardBody');
    let finishedCardBody = document.getElementById('finishCardBody');
    let counter = 1;
    const jobCounter = document.getElementById('jobCounter');
    let finishedJob = [];

    addJobBtn.addEventListener('click', () => {
        array.push(createJob());
        renderJobs(array);
        jobCounter.innerText = `${counter - 1}`
    })

    const createJob = () => {
        const div = document.createElement('div');
        div.setAttribute('class', 'bg-secondary d-flex align-items-center btn gap-1 text-white')
        const image = createImage();
        div.append(image);
        const span = createSpan();
        div.append(span);
        div.setAttribute('onclick', `finishJob(this)`);
        div.setAttribute('id', `job${counter - 1}`);
        return div;
    }

    const createImage = () => {
        const image = document.createElement('img');
        image.src = './image/file-earmark-text.svg'
        return image;
    }

    const createSpan = () => {
        const span = document.createElement('span');
        span.innerText = `Job ${counter}`;
        ++counter;
        return span;
    }

    const finishJob = (element) => {
        alert("farzad")
        alert(element.id)
        const newArray = array.filter(a => {
            return a.id !== element.id;
        })
        const finishElement = array.filter(a => {
            return a.id === element.id;
        })
        finishedJob.push(finishElement.pop());
        counter--;
        jobCounter.innerText = `${counter - 1}`
        array = newArray;
        renderJobs(newArray);
        renderFinishedJob(finishedJob);
    }

    const renderJobs = jobs => {
        cardBody.innerHTML = '';

        for (const arrayElement of jobs) {
            cardBody.appendChild(arrayElement);
        }
    }

    const renderFinishedJob = (finishedJobArray) => {
        finishedCardBody.innerHTML = '';

        for (const finishedJobElement of finishedJobArray) {
            finishedCardBody.appendChild(finishedJobElement);
        }
    }

</script>


</html>